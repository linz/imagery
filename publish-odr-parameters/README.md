# ODR Copy Workflow Parameters

This folder contains the parameter yaml files generated by the `publish-odr` argo workflow.

## How it Works:

### Step 1: Submit the publish-odr workflow using Argo

See [publish-odr](https://github.com/linz/topo-workflows/blob/master/workflows/raster/publish-odr.yaml) for more details.

### Step 2: Review and Approve

- Review and approve the STAC metadata and basemaps config preview link.
- Review the target path in the parameters yaml file.

Example parameters file:

```yaml
source: 's3://path/to/source/'
target: 's3://path/to/target/'
```

> [!Tip]
> If the parameters are incorrect or additional parameters are required they can be updated/added here.
> See the [copy workflow](https://github.com/linz/topo-workflows/tree/master/workflows/raster#copy) for additonal parameter options & default values.

### Step 3: Merge Pull Request

Once the pull request has been merged the [publish.yml](../.github/workflows/publish.yml) Github Action will run.

This will:

- Create a `catalog.json`.
- Validate the STAC.
- Submit a `copy` argo workflow for any added or modified parameter files in the `./publish-odr-parameters/` folder.
- Sync the `catalog.json` & `collection.json` created in this PR with the ODR bucket.

## Skipping Argo

> [!WARNING]
> This is required if, for any reason, changes are made to the yaml files within the `./publish-odr-parameters/` folder but the Argo `copy` workflow should not be run.

There may be some cases when you dont want to submit workflows.

In this case add `[skip-argo]` to the end of the pull request title, for example:

```
fix: Reformatting parameter files [skip-argo] TDE-000
```
